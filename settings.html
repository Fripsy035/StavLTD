<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>СЭД-СТАВ | Настройки</title>
    <link rel="stylesheet" href="style/styles.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <img src="img/logo.svg" alt="Логотип СЭД-СТАВ" class="logo-icon">
                </div>

                <div class="user-info">
                    <div class="user-avatar">ИИ</div>
                    <div>
                        <div class="user-name">Иванов Иван</div>
                        <div class="user-role">Администратор</div>
                    </div>
                    <button class="logout-btn">Выйти</button>
                </div>
                <button class="mobile-menu-toggle">☰</button>
            </div>
        </div>
        <nav id="main-nav">
            <div class="nav-container">
                <ul class="nav-menu">
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="documents.html">Документы</a></li>
                    <li><a href="approvals.html">Согласования</a></li>
                    <li><a href="reports.html">Отчеты</a></li>
                    <li><a href="settings.html" class="active">Настройки</a></li>
                    <li><a href="profile.html">Профиль</a></li>
                </ul>
            </div>
        </nav>
    </header>


    <div class="container">
        <div class="main-content">
            <div class="content">
                <div class="section-header">
                    <h2 class="section-title">Настройки системы</h2>
                </div>

                <div class="settings-container">
                    <aside class="settings-sidebar">
                        <ul class="settings-nav">
                            <li><a href="#general" class="active">Общие настройки</a></li>
                            <li><a href="#users">Пользователи</a></li>
                            <li><a href="#workflow">Процессы</a></li>
                            <li><a href="#notifications">Уведомления</a></li>
                            <li><a href="#security">Безопасность</a></li>
                            <li><a href="#backup">Резервное копирование</a></li>
                            <li><a href="#system">Системные настройки</a></li>
                        </ul>
                    </aside>

                    <main class="settings-content">
                        <!-- Общие настройки -->
                        <div id="general" class="settings-section">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Основные настройки системы</h3>
                                </div>
                                <form class="settings-form">
                                    <div class="form-group">
                                        <label class="form-label" for="timezone">Часовой пояс</label>
                                        <select class="form-control" id="timezone">
                                            <option value="+3">Москва (UTC+3)</option>
                                            <option value="+4">Самара (UTC+4)</option>
                                            <option value="+5">Екатеринбург (UTC+5)</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="date-format">Формат даты</label>
                                        <select class="form-control" id="date-format">
                                            <option value="dd.mm.yyyy">ДД.ММ.ГГГГ</option>
                                            <option value="yyyy-mm-dd">ГГГГ-ММ-ДД</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="email-notifications"
                                                checked>
                                            <label class="form-check-label" for="email-notifications">Включить
                                                email-уведомления</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="auto-logout" checked>
                                            <label class="form-check-label" for="auto-logout">Автоматический выход после
                                                30 минут неактивности</label>
                                        </div>
                                    </div>

                                    <button type="button" class="btn btn-primary">Сохранить настройки</button>
                                </form>
                            </div>
                        </div>

                        <!-- Пользователи -->
                        <div id="users" class="settings-section" style="display: none;">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Управление пользователями</h3>
                                    <button class="btn btn-success">Добавить пользователя</button>
                                </div>
                                <ul class="user-list">
                                    <!-- Пользователи загружаются динамически -->
                                </ul>
                            </div>
                        </div>

                        <!-- Процессы -->
                        <div id="workflow" class="settings-section" style="display: none;">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Настройки процессов согласования</h3>
                                </div>
                                <form class="settings-form">
                                    <div class="form-group">
                                        <label class="form-label" for="default-approval-time">Срок согласования по
                                            умолчанию (дни)</label>
                                        <input type="number" class="form-control" id="default-approval-time" value="5"
                                            min="1" max="30">
                                        <div class="form-text">Количество рабочих дней для согласования документа</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="reminder-days">Напоминание за (дни)</label>
                                        <input type="number" class="form-control" id="reminder-days" value="2" min="1"
                                            max="10">
                                        <div class="form-text">За сколько дней до окончания срока отправлять напоминание
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="auto-escalation"
                                                checked>
                                            <label class="form-check-label" for="auto-escalation">Автоматическая
                                                эскалация просроченных задач</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="parallel-approval">
                                            <label class="form-check-label" for="parallel-approval">Разрешить
                                                параллельное согласование</label>
                                        </div>
                                    </div>

                                    <button type="button" class="btn btn-primary">Сохранить настройки</button>
                                </form>
                            </div>
                        </div>

                        <!-- Уведомления -->
                        <div id="notifications" class="settings-section" style="display: none;">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Настройки уведомлений</h3>
                                </div>
                                <form class="settings-form">
                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="notify-new-document"
                                                checked>
                                            <label class="form-check-label" for="notify-new-document">Уведомлять о новых
                                                документах</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="notify-approval"
                                                checked>
                                            <label class="form-check-label" for="notify-approval">Уведомлять о задачах
                                                согласования</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="notify-overdue" checked>
                                            <label class="form-check-label" for="notify-overdue">Уведомлять о
                                                просроченных задачах</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="notify-comments">
                                            <label class="form-check-label" for="notify-comments">Уведомлять о новых
                                                комментариях</label>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="notification-frequency">Частота уведомлений по
                                            email</label>
                                        <select class="form-control" id="notification-frequency">
                                            <option value="immediately">Мгновенно</option>
                                            <option value="hourly">Каждый час</option>
                                            <option value="daily">Ежедневно</option>
                                        </select>
                                    </div>

                                    <button type="button" class="btn btn-primary">Сохранить настройки</button>
                                </form>
                            </div>
                        </div>

                        <!-- Безопасность -->
                        <div id="security" class="settings-section" style="display: none;">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Настройки безопасности</h3>
                                </div>
                                <form class="settings-form">
                                    <div class="form-group">
                                        <label class="form-label" for="password-policy">Политика паролей</label>
                                        <select class="form-control" id="password-policy">
                                            <option value="simple">Простая (минимум 6 символов)</option>
                                            <option value="medium" selected>Средняя (минимум 8 символов, буквы и цифры)</option>
                                            <option value="strong">Строгая (минимум 12 символов, буквы, цифры, спецсимволы)</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="session-timeout">Таймаут сессии (минуты)</label>
                                        <input type="number" class="form-control" id="session-timeout" value="30" min="5" max="480">
                                        <div class="form-text">Время неактивности до автоматического выхода из системы</div>
                                    </div>

                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="require-2fa">
                                            <label class="form-check-label" for="require-2fa">Требовать двухфакторную аутентификацию</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="log-login-attempts" checked>
                                            <label class="form-check-label" for="log-login-attempts">Логировать попытки входа</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="block-after-failed" checked>
                                            <label class="form-check-label" for="block-after-failed">Блокировать после 5 неудачных попыток</label>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="ip-whitelist">Белый список IP-адресов (по одному на строку)</label>
                                        <textarea class="form-control" id="ip-whitelist" rows="4" placeholder="192.168.1.1&#10;10.0.0.1"></textarea>
                                        <div class="form-text">Оставьте пустым, чтобы разрешить доступ с любых IP-адресов</div>
                                    </div>

                                    <button type="button" class="btn btn-primary" onclick="saveSecuritySettings()">Сохранить настройки</button>
                                </form>
                            </div>
                        </div>

                        <!-- Резервное копирование -->
                        <div id="backup" class="settings-section" style="display: none;">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Резервное копирование</h3>
                                </div>
                                <form class="settings-form">
                                    <div class="form-group">
                                        <label class="form-label" for="backup-frequency">Частота автоматического резервного копирования</label>
                                        <select class="form-control" id="backup-frequency">
                                            <option value="daily" selected>Ежедневно</option>
                                            <option value="weekly">Еженедельно</option>
                                            <option value="monthly">Ежемесячно</option>
                                            <option value="manual">Только вручную</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="backup-time">Время резервного копирования</label>
                                        <input type="time" class="form-control" id="backup-time" value="02:00">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="backup-retention">Хранить резервные копии (дней)</label>
                                        <input type="number" class="form-control" id="backup-retention" value="30" min="1" max="365">
                                        <div class="form-text">Количество дней, в течение которых хранятся резервные копии</div>
                                    </div>

                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="backup-compress" checked>
                                            <label class="form-check-label" for="backup-compress">Сжимать резервные копии</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="backup-encrypt">
                                            <label class="form-check-label" for="backup-encrypt">Шифровать резервные копии</label>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Последние резервные копии</label>
                                        <div class="backup-list" id="backup-list">
                                            <p style="color: #777; font-style: italic;">Резервные копии еще не создавались</p>
                                        </div>
                                    </div>

                                    <div class="form-actions" style="display: flex; gap: 10px;">
                                        <button type="button" class="btn btn-primary" onclick="createBackup()">Создать резервную копию</button>
                                        <button type="button" class="btn btn-secondary" onclick="restoreBackup()">Восстановить из копии</button>
                                        <button type="button" class="btn btn-primary" onclick="saveBackupSettings()">Сохранить настройки</button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Системные настройки -->
                        <div id="system" class="settings-section" style="display: none;">
                            <div class="settings-card">
                                <div class="settings-card-header">
                                    <h3 class="settings-card-title">Системные настройки</h3>
                                </div>
                                <form class="settings-form">
                                    <div class="form-group">
                                        <label class="form-label" for="system-name">Название системы</label>
                                        <input type="text" class="form-control" id="system-name" value="СЭД-СТАВ">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="max-file-size">Максимальный размер файла (МБ)</label>
                                        <input type="number" class="form-control" id="max-file-size" value="50" min="1" max="500">
                                        <div class="form-text">Максимальный размер файла, который можно загрузить в систему</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="allowed-file-types">Разрешенные типы файлов</label>
                                        <input type="text" class="form-control" id="allowed-file-types" value="pdf,doc,docx,xls,xlsx,ppt,pptx,jpg,jpeg,png">
                                        <div class="form-text">Список разрешенных расширений файлов через запятую</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="max-documents-per-user">Максимум документов на пользователя</label>
                                        <input type="number" class="form-control" id="max-documents-per-user" value="1000" min="1">
                                        <div class="form-text">Максимальное количество документов, которое может создать один пользователь</div>
                                    </div>

                                    <div class="form-group">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="enable-versioning" checked>
                                            <label class="form-check-label" for="enable-versioning">Включить версионирование документов</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="enable-audit-log" checked>
                                            <label class="form-check-label" for="enable-audit-log">Вести журнал аудита</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="enable-maintenance-mode">
                                            <label class="form-check-label" for="enable-maintenance-mode">Режим обслуживания</label>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="log-level">Уровень логирования</label>
                                        <select class="form-control" id="log-level">
                                            <option value="error">Только ошибки</option>
                                            <option value="warning" selected>Предупреждения и ошибки</option>
                                            <option value="info">Информация, предупреждения и ошибки</option>
                                            <option value="debug">Все события (отладка)</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Информация о системе</label>
                                        <div class="system-info" style="background: #f5f5f5; padding: 15px; border-radius: 4px;">
                                            <p><strong>Версия системы:</strong> 1.0.0</p>
                                            <p><strong>Дата установки:</strong> <span id="install-date">-</span></p>
                                            <p><strong>Последнее обновление:</strong> <span id="last-update">-</span></p>
                                            <p><strong>Количество пользователей:</strong> <span id="total-users">-</span></p>
                                            <p><strong>Количество документов:</strong> <span id="total-documents">-</span></p>
                                        </div>
                                    </div>

                                    <button type="button" class="btn btn-primary" onclick="saveSystemSettings()">Сохранить настройки</button>
                                </form>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Система электронного документооборота "СЭД-СТАВ" © 2025</p>
            <p>Компания "СТАВ ЛТД"</p>
        </div>
    </footer>

    <script src="script/database.js"></script>
    <script src="script/script.js"></script>
    <script src="script/auth.js"></script>
    <script src="script/user-info.js"></script>
    <script src="script/access-control.js"></script>
    <script src="script/documents.js"></script>
    <script src="script/modals.js"></script>
    <script src="script/settings-page.js"></script>
</body>

</html>